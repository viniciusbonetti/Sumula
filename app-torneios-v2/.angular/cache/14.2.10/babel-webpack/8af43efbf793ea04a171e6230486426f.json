{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/dev02/Documents/GitHub/Sumula/app-torneios-v2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ControllerComponent } from 'src/app/controller/controller.component';\nimport * as i0 from \"@angular/core\";\nexport let EventosComponent = /*#__PURE__*/(() => {\n  class EventosComponent extends ControllerComponent {\n    constructor() {\n      super(...arguments);\n      this.getToken = localStorage.getItem(\"Authorization\");\n      this.tenant = localStorage.getItem(\"tenant\");\n      this.baseUrl = \"http://dornez.vps-kinghost.net/sumulaApi/api\";\n      this.urlGet = `${this.baseUrl}/evento/t${this.tenant}`;\n      this.urlPost = `${this.baseUrl}/evento/`;\n      this.headers = {\n        Authorization: this.getToken,\n        \"Content-Type\": \"application/json\"\n      };\n      this.setToken = {\n        headers: this.headers\n      };\n      this.novoCadastro = false;\n      this.editar = false;\n      this.editarModalidadeEvento = false;\n      this.listaEventos = [];\n      this.listaEstado = JSON.parse(localStorage.getItem(\"listaEstados\"));\n      this.listaCargosCco = [];\n      this.listaTiposDocumentos = [];\n      this.listaOcupantes = [];\n      this.listaMunicipios = [];\n      this.listaMunicipiosEvento = [];\n      this.listaModalidades = [];\n      this.listaModalidadesEvento = [];\n      this.listaNaipe = [];\n      this.inputNomeEvento = \"\";\n      this.inputDataInicio = \"\";\n      this.inputDataFim = \"\";\n      this.inputNomeTenant = \"\";\n      this.inputNomeOcupante = \"\";\n      this.inputNumeroDocumento = \"\";\n      this.inputIdadeInicial = \"\";\n      this.inputIdadeFinal = \"\";\n      this.inputEditarIdadeInicial = \"\";\n      this.inputEditarIdadeFinal = \"\";\n      this.cargoSelect = \"\";\n      this.estadoSelect = \"\";\n      this.municipioSelect = \"\";\n      this.documentoSelect = \"\";\n      this.modalidadeSelect = \"\";\n      this.naipeSelect = \"\";\n      this.editarModalidadeSelect = \"\";\n      this.editarNaipeSelect = \"\";\n      this.idEditarEvento = \"\";\n      this.idEvento = \"\";\n      this.idRegistroModalidade = \"\";\n      this.num = \"\";\n    }\n\n    ngOnInit() {\n      this.getEventos();\n    }\n\n    cadastrar() {\n      this.novoCadastro = !this.novoCadastro;\n    }\n\n    botaoAvancar() {\n      if (this.num == \"\") {\n        if (this.editar) {\n          this.editarNomeEvento();\n        } else {\n          this.sendEventos();\n        }\n\n        this.getCargosCco();\n      } else if (this.num == \"1\") {\n        if (this.listaModalidadesEvento.length > 0) {\n          this.num = '2';\n        } else {\n          alert('cadastre uma modalidade');\n        }\n\n        this.getOcupantes();\n      } else if (this.num == \"2\") {\n        if (this.listaOcupantes.length > 0) {\n          this.num = '3';\n        } else {\n          this.sendNovoOcupante();\n        }\n\n        this.getMunicipiosEvento();\n      }\n    }\n\n    getEventos() {\n      var _this = this;\n\n      return _asyncToGenerator(function* () {\n        const path = _this.paths.evento + `/t${_this.tenant}`;\n        _this.listaEventos = yield _this.getInfo(path, _this.setToken);\n      })();\n    }\n\n    sendEventos() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        const formEventos = new FormData();\n        formEventos.append(\"nm_evento\", _this2.inputNomeEvento);\n        formEventos.append(\"dt_inicio\", _this2.inputDataInicio);\n        formEventos.append(\"dt_fim\", _this2.inputDataFim);\n        formEventos.append(\"id_tenant\", _this2.tenant);\n        let sendInfoEvento = yield _this2.postInfo(_this2.paths.evento, formEventos, _this2.setToken);\n        _this2.idEvento = sendInfoEvento.id;\n        _this2.inputNomeEvento = \"\";\n        _this2.inputDataInicio = \"\";\n        _this2.inputDataFim = \"\";\n        _this2.inputNomeTenant = \"\";\n\n        _this2.getModalidades();\n\n        _this2.num = \"1\";\n      })();\n    }\n\n    cancelarCadastro() {\n      this.inputNomeEvento = \"\";\n      this.inputDataInicio = \"\";\n      this.inputDataFim = \"\";\n      this.inputNomeTenant = \"\";\n      this.novoCadastro = !this.novoCadastro;\n    }\n\n    getModalidades() {\n      var _this3 = this;\n\n      return _asyncToGenerator(function* () {\n        _this3.listaModalidades = yield _this3.getInfo(_this3.paths.modalidade, _this3.setToken);\n      })();\n    }\n\n    sendModalidadesEvento(metodo, item) {\n      var _this4 = this;\n\n      return _asyncToGenerator(function* () {\n        if (metodo == 'post') {\n          const formModalidadeEvento = new FormData();\n          formModalidadeEvento.append(\"id_tenant\", _this4.tenant);\n          formModalidadeEvento.append(\"id_evento\", _this4.idEvento);\n          formModalidadeEvento.append(\"id_modalidade\", _this4.modalidadeSelect);\n          formModalidadeEvento.append(\"nr_idadeinicio\", _this4.inputIdadeInicial);\n          formModalidadeEvento.append(\"nr_idadefinal\", _this4.inputIdadeFinal);\n          formModalidadeEvento.append(\"tp_naipe\", _this4.naipeSelect);\n          yield _this4.postInfo(_this4.paths.modalidadeevento, formModalidadeEvento, _this4.setToken);\n        } else if (metodo == 'put') {\n          const formEditarModaidadeEvento = new FormData();\n          formEditarModaidadeEvento.append(\"id_tenant\", _this4.tenant);\n          formEditarModaidadeEvento.append(\"id_evento\", _this4.idEvento);\n          formEditarModaidadeEvento.append(\"id_modalidade\", _this4.editarModalidadeSelect);\n          formEditarModaidadeEvento.append(\"nr_idadeinicio\", _this4.inputEditarIdadeInicial);\n          formEditarModaidadeEvento.append(\"nr_idadefinal\", _this4.inputEditarIdadeFinal);\n          formEditarModaidadeEvento.append(\"tp_naipe\", _this4.editarNaipeSelect);\n          const path = _this4.paths.modalidadeevento + `/${item.id}`;\n          yield _this4.putInfo(path, formEditarModaidadeEvento, _this4.setToken);\n        }\n\n        _this4.modalidadeSelect = '';\n        _this4.inputIdadeInicial = '';\n        _this4.inputIdadeFinal = '';\n        _this4.naipeSelect = '';\n\n        _this4.getModalidadesEvento();\n      })();\n    }\n\n    getModalidadesEvento() {\n      var _this5 = this;\n\n      return _asyncToGenerator(function* () {\n        const path = _this5.paths.modalidadeevento + `/i${_this5.idEvento}&t${_this5.tenant}`;\n        _this5.listaModalidadesEvento = yield _this5.getInfo(path, _this5.setToken);\n      })();\n    }\n\n    getCargosCco() {\n      var _this6 = this;\n\n      return _asyncToGenerator(function* () {\n        const path = _this6.paths.cargocco + `/t${_this6.tenant}`;\n        _this6.listaCargosCco = yield _this6.getInfo(path, _this6.setToken);\n      })();\n    }\n\n    sendNovoOcupante() {\n      var _this7 = this;\n\n      return _asyncToGenerator(function* () {\n        const formOcupante = new FormData();\n        formOcupante.append(\"id_tenant\", _this7.tenant);\n        formOcupante.append(\"id_evento\", _this7.idEvento);\n        formOcupante.append(\"id_cargocco\", _this7.cargoSelect);\n        formOcupante.append(\"nm_ocupante\", _this7.inputNomeOcupante);\n        formOcupante.append(\"tp_documento\", _this7.documentoSelect);\n        formOcupante.append(\"nr_documento\", _this7.inputNumeroDocumento);\n        yield _this7.postInfo(_this7.paths.ccoevento, formOcupante, _this7.setToken);\n\n        _this7.limparFormOcupante();\n      })();\n    }\n\n    limparFormOcupante() {\n      this.cargoSelect = \"\";\n      this.inputNomeOcupante = \"\";\n      this.documentoSelect = \"\";\n      this.inputNumeroDocumento = \"\";\n    }\n\n    getOcupantes() {\n      var _this8 = this;\n\n      return _asyncToGenerator(function* () {\n        const path = _this8.paths.ccoevento + `/i${_this8.idEvento}&t${_this8.tenant}`;\n        _this8.listaOcupantes = yield _this8.getInfo(path, _this8.setToken);\n      })();\n    }\n\n    getMunicipio() {\n      var _this9 = this;\n\n      return _asyncToGenerator(function* () {\n        const path = _this9.paths.municipio + `/${_this9.estadoSelect}`;\n        _this9.listaMunicipios = yield _this9.getInfo(path, _this9.setToken);\n      })();\n    }\n\n    cadastrarNovoMunicipio(metodo, item) {\n      var _this10 = this;\n\n      return _asyncToGenerator(function* () {\n        const formMunicipioEvento = new FormData();\n        formMunicipioEvento.append(\"id_evento\", _this10.idEvento);\n        formMunicipioEvento.append(\"id_municipio\", _this10.municipioSelect);\n        formMunicipioEvento.append(\"id_tenant\", _this10.tenant);\n\n        if (metodo == 'post') {\n          yield _this10.postInfo(_this10.paths.municipioevento, formMunicipioEvento, _this10.setToken);\n        } else if (metodo == 'put') {\n          const path = _this10.paths.municipioevento + `/${item.id}`;\n          yield _this10.putInfo(path, formMunicipioEvento, _this10.setToken);\n        }\n\n        _this10.getMunicipiosEvento();\n      })();\n    }\n\n    getMunicipiosEvento() {\n      var _this11 = this;\n\n      return _asyncToGenerator(function* () {\n        const path = _this11.paths.municipioevento + `/i${_this11.idEvento}&t${_this11.tenant}`;\n        _this11.listaMunicipiosEvento = yield _this11.getInfo(path, _this11.setToken);\n      })();\n    }\n\n    editarEvento(item) {\n      var _this12 = this;\n\n      return _asyncToGenerator(function* () {\n        _this12.novoCadastro = true;\n        _this12.editar = true;\n        _this12.idEvento = item.id;\n        const path = _this12.paths.evento + `/i${item.id}&t${_this12.tenant}`;\n        let getInfoEvento = yield _this12.getInfo(path, _this12.setToken);\n        _this12.inputNomeEvento = getInfoEvento[0].nm_evento;\n        _this12.inputDataInicio = getInfoEvento[0].dt_inicio;\n        _this12.inputDataFim = getInfoEvento[0].dt_fim;\n      })();\n    }\n\n    editarNomeEvento() {\n      var _this13 = this;\n\n      return _asyncToGenerator(function* () {\n        const path = _this13.paths.evento + `/${_this13.idEvento}`;\n        const formEditarEvento = new FormData();\n        formEditarEvento.append('nm_evento', _this13.inputNomeEvento);\n        formEditarEvento.append(\"dt_inicio\", _this13.inputDataInicio);\n        formEditarEvento.append(\"dt_fim\", _this13.inputDataFim);\n        formEditarEvento.append(\"id_tenant\", _this13.tenant);\n        yield _this13.putInfo(path, formEditarEvento, _this13.setToken);\n        _this13.num = \"1\";\n\n        _this13.getModalidades();\n\n        _this13.getModalidadesEvento();\n      })();\n    }\n\n    mostrarEditarModalidade(item) {\n      item.editarModalidadeEvento = true;\n      this.editarModalidadeSelect = item.id_modalidade.id;\n      this.inputEditarIdadeInicial = item.nr_idadeinicio;\n      this.inputEditarIdadeFinal = item.nr_idadefinal;\n      this.editarNaipeSelect = item.tp_naipe;\n    }\n\n    excluir(item) {\n      var _this14 = this;\n\n      return _asyncToGenerator(function* () {\n        _this14.idRegistroModalidade = item.id;\n        const path = _this14.paths.modalidadeevento + `/${_this14.idRegistroModalidade}`;\n        yield _this14.deleteInfo(path, _this14.setToken);\n        _this14.idRegistroModalidade = '';\n\n        _this14.getModalidadesEvento();\n      })();\n    }\n\n  }\n\n  EventosComponent.ɵfac = /*@__PURE__*/function () {\n    let ɵEventosComponent_BaseFactory;\n    return function EventosComponent_Factory(t) {\n      return (ɵEventosComponent_BaseFactory || (ɵEventosComponent_BaseFactory = i0.ɵɵgetInheritedFactory(EventosComponent)))(t || EventosComponent);\n    };\n  }();\n\n  EventosComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: EventosComponent,\n    selectors: [[\"app-eventos\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 2,\n    vars: 0,\n    template: function EventosComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"p\");\n        i0.ɵɵtext(1, \"eventos works!\");\n        i0.ɵɵelementEnd();\n      }\n    }\n  });\n  return EventosComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}