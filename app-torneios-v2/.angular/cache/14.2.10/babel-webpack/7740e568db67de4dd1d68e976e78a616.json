{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/dev02/Documents/GitHub/Sumula/app-torneios-v2/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { Location, PopStateEvent } from \"@angular/common\";\nimport { Router, NavigationEnd, NavigationStart } from \"@angular/router\"; // import * as $ from \"jquery\";\n\nimport { filter } from \"rxjs\";\nimport axios from \"axios\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/material/input\";\n\nfunction AdminLayoutComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 2)(1, \"div\", 3);\n    i0.ɵɵelement(2, \"app-sidebar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\", 4);\n    i0.ɵɵelement(4, \"app-navbar\")(5, \"router-outlet\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction AdminLayoutComponent_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"main\", 5)(2, \"div\", 6);\n    i0.ɵɵelement(3, \"i\", 7);\n    i0.ɵɵelementStart(4, \"header\");\n    i0.ɵɵtext(5, \"LOGIN\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"section\")(7, \"div\");\n    i0.ɵɵelement(8, \"i\", 8);\n    i0.ɵɵelementStart(9, \"input\", 9);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminLayoutComponent_div_1_div_1_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r4.inputUserLogin = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\");\n    i0.ɵɵelement(11, \"i\", 10);\n    i0.ɵɵelementStart(12, \"input\", 11);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminLayoutComponent_div_1_div_1_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.inputUserPassword = $event);\n    })(\"keyup.enter\", function AdminLayoutComponent_div_1_div_1_Template_input_keyup_enter_12_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r7 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r7.sendLogin());\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(13, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function AdminLayoutComponent_div_1_div_1_Template_button_click_13_listener($event) {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.sendLogin($event));\n    });\n    i0.ɵɵtext(14, \"Login\");\n    i0.ɵɵelementEnd()()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.inputUserLogin);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r3.inputUserPassword);\n  }\n}\n\nfunction AdminLayoutComponent_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, AdminLayoutComponent_div_1_div_1_Template, 15, 2, \"div\", 1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.cadastrarUsuarioActive);\n  }\n}\n\nfunction AdminLayoutComponent_div_2_option_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 20);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const item_r10 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", item_r10.id_tenant);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(item_r10.nm_tenant);\n  }\n}\n\nfunction AdminLayoutComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 13)(2, \"main\", 14)(3, \"div\")(4, \"div\")(5, \"header\");\n    i0.ɵɵtext(6, \"TENANT\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h4\");\n    i0.ɵɵtext(8, \"Escolha o Tenant que deseja logar:\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 15)(10, \"select\", 16);\n    i0.ɵɵlistener(\"ngModelChange\", function AdminLayoutComponent_div_2_Template_select_ngModelChange_10_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.tenantSelect = $event);\n    });\n    i0.ɵɵelementStart(11, \"option\", 17);\n    i0.ɵɵtext(12, \"\\uF0D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(13, AdminLayoutComponent_div_2_option_13_Template, 2, 2, \"option\", 18);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(14, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function AdminLayoutComponent_div_2_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.enviar());\n    });\n    i0.ɵɵtext(15, \"Enviar\");\n    i0.ɵɵelementEnd()()()();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(10);\n    i0.ɵɵproperty(\"ngModel\", ctx_r2.tenantSelect);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.tenantList);\n  }\n}\n\nexport let AdminLayoutComponent = /*#__PURE__*/(() => {\n  class AdminLayoutComponent {\n    constructor(location, router) {\n      var _this = this;\n\n      this.location = location;\n      this.router = router;\n      this.yScrollStack = [];\n      this.inputUserLogin = \"\";\n      this.inputUserPassword = \"\";\n      this.validatedLogin = true;\n      this.cadastrarUsuarioActive = false;\n      this.logadoTenant = true;\n      this.tenantList = [];\n      this.tenantSelect = ''; // public headers: { Authorization: string } = { Authorization: '' };\n\n      this.config = {};\n\n      this.sendLogin = /*#__PURE__*/function () {\n        var _ref = _asyncToGenerator(function* (event) {\n          var logado = true;\n          event.target.disabled = true;\n\n          if (logado) {\n            var loginObject = {\n              ds_email: _this.inputUserLogin,\n              sn_usuario: _this.inputUserPassword\n            };\n            const baseUrl = \"http://dornez.vps-kinghost.net/sumulaApi/api\"; // var headers = {'Authorization': 'Bearer '};\n\n            _this.config = {\n              headers: {\n                Authorization: \"Bearer \"\n              }\n            };\n            const url = `${baseUrl}/login`;\n            const url2 = `${baseUrl}/user`;\n\n            try {\n              let sendInfo = yield axios.post(url, loginObject);\n              const token = \"Bearer \" + sendInfo.data.data.token;\n              _this.config = {\n                headers: {\n                  Authorization: token\n                }\n              }; // console.log(this.config);\n\n              localStorage.setItem(\"Authorization\", token);\n              localStorage.setItem(\"Id\", sendInfo.data.data.id_usuario);\n              _this.validatedLogin = true;\n              _this.cadastrarUsuarioActive = true;\n\n              _this.getTenant();\n\n              _this.router.navigate(['/cadastrar-usuarios']);\n            } catch (errors) {\n              var erro = errors.response.data.data;\n\n              if (erro.type === Array) {\n                for (let i = 0; i < erro.length; i++) {\n                  var input = document.getElementsByName(erro[i].campo);\n                  input[0].parentElement.classList.add(\"has-danger\");\n                  input[0].parentElement.parentElement.parentElement.parentElement.nextElementSibling.classList.add(\"text-danger\");\n                  input[0].parentElement.parentElement.parentElement.parentElement.nextElementSibling.innerHTML = erro[i].mensagem;\n                }\n              } else {\n                _this.showNotification(\"bottom\", \"center\", erro, \"danger\");\n              }\n\n              event.target.disabled = false;\n            }\n          }\n\n          return;\n        });\n\n        return function (_x) {\n          return _ref.apply(this, arguments);\n        };\n      }();\n    }\n\n    ngOnInit() {\n      const isWindows = navigator.platform.indexOf(\"Win\") > -1 ? true : false; //   if (isWindows && !document.getElementsByTagName('body')[0].classList.contains('sidebar-mini')) {\n      //       // if we are on windows OS we activate the perfectScrollbar function\n      //       document.getElementsByTagName('body')[0].classList.add('perfect-scrollbar-on');\n      //   } else {\n      //       document.getElementsByTagName('body')[0].classList.remove('perfect-scrollbar-off');\n      //   }\n\n      const elemMainPanel = document.querySelector(\".main-panel\");\n      const elemSidebar = document.querySelector(\".sidebar .sidebar-wrapper\");\n      this.location.subscribe(ev => {\n        this.lastPoppedUrl = ev.url;\n      });\n      this.router.events.subscribe(event => {\n        if (event instanceof NavigationStart) {\n          if (event.url != this.lastPoppedUrl) this.yScrollStack.push(window.scrollY);\n        } else if (event instanceof NavigationEnd) {\n          if (event.url == this.lastPoppedUrl) {\n            this.lastPoppedUrl = undefined;\n            window.scrollTo(0, this.yScrollStack.pop());\n          } else window.scrollTo(0, 0);\n        }\n      });\n      this._router = this.router.events.pipe(filter(event => event instanceof NavigationEnd)).subscribe(event => {//    elemMainPanel.scrollTop = 0;\n        //    elemSidebar.scrollTop = 0;\n      });\n\n      if (window.matchMedia(`(min-width: 960px)`).matches && !this.isMac()) {//   let ps = new PerfectScrollbar(elemMainPanel);\n        //   ps = new PerfectScrollbar(elemSidebar);\n      }\n\n      const window_width = $(window).width();\n      let $sidebar = $(\".sidebar\");\n      let $sidebar_responsive = $(\"body > .navbar-collapse\");\n      let $sidebar_img_container = $sidebar.find(\".sidebar-background\");\n\n      if (window_width > 767) {\n        if ($(\".fixed-plugin .dropdown\").hasClass(\"show-dropdown\")) {\n          $(\".fixed-plugin .dropdown\").addClass(\"open\");\n        }\n      }\n\n      $(\".fixed-plugin a\").click(function (event) {\n        // Alex if we click on switch, stop propagation of the event, so the dropdown will not be hide, otherwise we set the  section active\n        if ($(this).hasClass(\"switch-trigger\")) {\n          if (event.stopPropagation) {\n            event.stopPropagation();\n          } else if (window.event) {\n            window.event.cancelBubble = true;\n          }\n        }\n      });\n      $(\".fixed-plugin .badge\").click(function () {\n        let $full_page_background = $(\".full-page-background\");\n        $(this).siblings().removeClass(\"active\");\n        $(this).addClass(\"active\");\n        var new_color = $(this).data(\"color\");\n\n        if ($sidebar.length !== 0) {\n          $sidebar.attr(\"data-color\", new_color);\n        }\n\n        if ($sidebar_responsive.length != 0) {\n          $sidebar_responsive.attr(\"data-color\", new_color);\n        }\n      });\n      $(\".fixed-plugin .img-holder\").click(function () {\n        let $full_page_background = $(\".full-page-background\");\n        $(this).parent(\"li\").siblings().removeClass(\"active\");\n        $(this).parent(\"li\").addClass(\"active\");\n        var new_image = $(this).find(\"img\").attr(\"src\");\n\n        if ($sidebar_img_container.length != 0) {\n          $sidebar_img_container.fadeOut(\"fast\", function () {\n            $sidebar_img_container.css(\"background-image\", 'url(\"' + new_image + '\")');\n            $sidebar_img_container.fadeIn(\"fast\");\n          });\n        }\n\n        if ($full_page_background.length != 0) {\n          $full_page_background.fadeOut(\"fast\", function () {\n            $full_page_background.css(\"background-image\", 'url(\"' + new_image + '\")');\n            $full_page_background.fadeIn(\"fast\");\n          });\n        }\n\n        if ($sidebar_responsive.length != 0) {\n          $sidebar_responsive.css(\"background-image\", 'url(\"' + new_image + '\")');\n        }\n      });\n    }\n\n    ngAfterViewInit() {\n      this.runOnRouteChange();\n    }\n\n    isMaps(path) {\n      var titlee = this.location.prepareExternalUrl(this.location.path());\n      titlee = titlee.slice(1);\n\n      if (path == titlee) {\n        return false;\n      } else {\n        return true;\n      }\n    }\n\n    runOnRouteChange() {\n      if (window.matchMedia(`(min-width: 960px)`).matches && !this.isMac()) {\n        const elemMainPanel = document.querySelector(\".main-panel\"); //   const ps = new PerfectScrollbar(elemMainPanel);\n        //   ps.update();\n      }\n    }\n\n    isMac() {\n      let bool = false;\n\n      if (navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0 || navigator.platform.toUpperCase().indexOf(\"IPAD\") >= 0) {\n        bool = true;\n      }\n\n      return bool;\n    }\n\n    showNotification(from, align, message, type) {\n      $.notify({\n        icon: \"add_alert\",\n        message: message\n      }, {\n        type: type,\n        timer: 4000,\n        placement: {\n          from: from,\n          align: align\n        }\n      });\n    }\n\n    getTenant() {\n      var _this2 = this;\n\n      return _asyncToGenerator(function* () {\n        const baseUrl = \"http://dornez.vps-kinghost.net/sumulaApi/api\";\n        const url = `${baseUrl}/geral`;\n        let setId = localStorage.getItem(\"Id\");\n        let getToken = localStorage.getItem(\"Authorization\");\n        let headers = {\n          Authorization: getToken,\n          \"Content-Type\": \"application/json\"\n        };\n        let setToken = {\n          headers: headers\n        };\n        const formTenant = new FormData();\n        formTenant.append(\"id_usuario\", setId);\n        formTenant.append(\"tipo_request\", \"tenantUser\");\n        let getTenant = yield axios.post(url, formTenant, setToken); // console.log(getTenant);\n\n        _this2.tenantList = getTenant.data.data;\n      })();\n    }\n\n    enviar() {\n      if (this.tenantSelect !== '') {\n        localStorage.setItem(\"tenant\", this.tenantSelect);\n        this.router.navigate(['/home']);\n        this.cadastrarUsuarioActive = false;\n        this.logadoTenant = true;\n      }\n    }\n\n  }\n\n  AdminLayoutComponent.ɵfac = function AdminLayoutComponent_Factory(t) {\n    return new (t || AdminLayoutComponent)(i0.ɵɵdirectiveInject(i1.Location), i0.ɵɵdirectiveInject(i2.Router));\n  };\n\n  AdminLayoutComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AdminLayoutComponent,\n    selectors: [[\"app-admin-layout\"]],\n    decls: 3,\n    vars: 3,\n    consts: [[\"class\", \"wrapper\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"wrapper\"], [\"data-color\", \"danger\", \"data-background-color\", \"white\", \"data-image\", \"./assets/img/sidebar-1.jpg\", 1, \"sidebar\"], [1, \"main-panel\"], [1, \"container-login\"], [1, \"container-login-card\", \"bg-danger\"], [1, \"fas\", \"fa-id-card-alt\", \"fa-4x\"], [1, \"fa-solid\", \"fa-envelope\", \"fa-3x\"], [\"type\", \"text\", \"name\", \"ds_email\", \"placeholder\", \"user\", 1, \"input-login\", 3, \"ngModel\", \"ngModelChange\"], [1, \"fa-solid\", \"fa-keyboard\", \"fa-3x\"], [\"type\", \"password\", \"name\", \"sn_usuario\", \"placeholder\", \"password\", 1, \"input-login\", 3, \"ngModel\", \"ngModelChange\", \"keyup.enter\"], [1, \"button-login\", 3, \"click\"], [1, \"container-cadastrar-usuarios\"], [1, \"container-singup-card\", \"bg-danger\"], [\"appearance\", \"fill\"], [\"name\", \"lista-tenant\", \"matNativeControl\", \"\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"selected\", \"\", \"disabled\", \"\", \"value\", \"\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [3, \"value\"]],\n    template: function AdminLayoutComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, AdminLayoutComponent_div_0_Template, 6, 0, \"div\", 0);\n        i0.ɵɵtemplate(1, AdminLayoutComponent_div_1_Template, 2, 1, \"div\", 1);\n        i0.ɵɵtemplate(2, AdminLayoutComponent_div_2_Template, 16, 2, \"div\", 1);\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", ctx.logadoTenant);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", !ctx.validatedLogin);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.cadastrarUsuarioActive);\n      }\n    },\n    dependencies: [i1.NgForOf, i1.NgIf, i3.NgSelectOption, i3.ɵNgSelectMultipleOption, i3.DefaultValueAccessor, i3.SelectControlValueAccessor, i3.NgControlStatus, i3.RequiredValidator, i3.NgModel, i2.RouterOutlet, i4.MatInput],\n    encapsulation: 2\n  });\n  return AdminLayoutComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}